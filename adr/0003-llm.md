# LLM

LLM(Large Lanuguage Model)、いわゆる生成AIを用いた拡張機能

## 機能概要

- ユーザのAPI Tokenを用いて日記分析をAIにしてもらう

### 日記要約

- 特定の日の日記を箇条書きで要約
- 特定の月の日記を元に、その月を要約

### 傾向表示

- 先週、先月、1年前と比べて直近の日記はどのような傾向があるかを表示

### 日記ハイライト

- 日記の中で固有名詞や人物名をハイライトして読みやすくする

## 実装しない機能

- 特定の年の要約：年での変化は大きく、また日本では特に年度単位での変化が大きく年で区切ることに意義がない
- 全体の要約：人生を1つの要約でまとめることは本質でない。人間は変化するため。

## 仕様

### バックエンド

#### 使用するAI

現段階ではGoogle Geminiを利用する。

理由

- 無料枠が存在する
- 入力可能なToken数が多い
- Google社という比較的安定している企業

#### tokenの保存

- tokenはユーザのものを使用する

#### 保存

- 生成はtoken節約のためにボタンを押すことで行うようにする
- 一度生成したものは再生成しないように保存する
  - 明示的な削除 or diaryの更新でdeprecatedをつける

#### DB設計

- user_llms
  - userのLLM情報を保持
  - LLM APIへ使用するToken情報を保持する
- diary_summary_mothes
- diary_summary_days
- diary_trends
- diary_highlights
